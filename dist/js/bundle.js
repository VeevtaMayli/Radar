!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function i({ctx:t,indicator:e}){e.grid.rings.forEach(n=>{!function({ctx:t,indicator:e,ring:n}){t.strokeStyle=e.grid.color,t.lineWidth=e.grid.width,t.beginPath(),t.arc(e.x,e.y,n.position*e.radius,0,2*Math.PI),t.stroke()}({ctx:t,indicator:e,ring:n})})}function a({ctx:t,indicator:e}){!function({ctx:t,indicator:e}){t.fillStyle=e.background,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI),t.fill()}({ctx:t,indicator:e}),i({ctx:t,indicator:e}),function({ctx:t,indicator:e}){const n=e.x,i=e.y,a=e.grid.sectorCount,r=e.grid.edge*e.radius;t.strokeStyle=e.grid.color,t.lineWidth=e.grid.width,t.beginPath();for(let e=0;e<a;e++){const o=2*e*Math.PI/a;t.moveTo(n,i),t.lineTo(n+Math.sin(o)*r,i-Math.cos(o)*r)}t.stroke()}({ctx:t,indicator:e}),function({ctx:t,indicator:e}){const n=e.x,i=e.y,a=e.scanLine.angle,r=e.grid.edge*e.radius;t.strokeStyle=e.scanLine.color,t.lineWidth=e.scanLine.width,t.beginPath(),t.moveTo(n,i),t.lineTo(n+Math.sin(a)*r,i-Math.cos(a)*r),t.stroke()}({ctx:t,indicator:e})}function r({ctx:t,indicator:e,targets:n}){e.draw(t),n.forEach(n=>{n.draw({ctx:t,indicator:e})})}function o(t){return Math.sqrt(t.reduce((t,e)=>t+Math.pow(e,2),0))}function s(t){return t>=0?t:2*Math.PI+t}n.r(e);const c="#000000",l="#11681d ",d=12,u=4,g=1,h=.95,f="#0fb11f",p=3,m=0,y=2,x=4e4,M=5e-7,v=2e4,w=1e-5,E=2e5,b=.003,L=2e-8,S=3e8,A=.85;function I({startX:t,startY:e,radius:n}){this.x=t,this.y=e,this.radius=n,this.background=c,this.grid={edge:h,rings:k(),color:l,width:g,sectorCount:d},this.scanLine={angle:m,width:p,color:f,period:y},this.signal={td:M,speed:S,amplitude:v,duration:w,carrier:E,attenuationRatio:b,noiseLevel:L,maxDistance:x,responseLimit:A,function:t=>{const e=this.signal.amplitude,n=this.signal.carrier,i=this.signal.duration;return t>=0&&t<=i?e*Math.sin(2*Math.PI*n*t):0},sampling:()=>{const t=this.signal.td,e=Math.floor(this.signal.duration/t),n=this.signal.function;this.signal.samples=new Array(e).fill(0),this.signal.samples.forEach((e,i,a)=>{a[i]=n(i*t)})}},this.filter={create:()=>{const t=this.signal.samples.slice().reverse();this.filter.samples=t,this.filter.norm=o(t)}},this.draw=(t=>{a({ctx:t,indicator:this})})}function P(t){this.position=t}function k(){const t=[];for(let e=0;e<u;e++){const n=h*(e+1)/u;t.push(new P(n))}return t}const O="rgba(200,204,000,1)",T=5,_=2,B={linear:function(t){const e=this.x0,n=this.y0,i=this.speed,a=this.acceleration,r=e+i.x*t+.5*a.x*Math.pow(t,2),o=n+i.y*t+.5*a.y*Math.pow(t,2);return{radius:Math.sqrt(Math.pow(r,2)+Math.pow(o,2)),angle:s(Math.atan2(r,-o))}},random:function(t){const e=this.x0,n=this.y0,i=e+100*(2*Math.random()-1)*t,a=n+100*(2*Math.random()-1)*t;return{radius:Math.sqrt(Math.pow(i,2)+Math.pow(a,2)),angle:s(Math.atan2(i,-a))}}};function j({radius:t,angle:e,xSpeed:n=0,ySpeed:i=0,xAcceleration:a=0,yAcceleration:r=0,type:o="linear"}){this.type=o,this.radius=t,this.angle=e,this.x0=this.radius*Math.sin(this.angle),this.y0=-this.radius*Math.cos(this.angle),this.color=O,this.size=T,this.speed={x:n,y:i},this.acceleration={x:a,y:r},this.motionLaw=B[this.type],this.draw=(({ctx:t,indicator:e})=>{!function({ctx:t,target:e,indicator:n}){const i=n.signal.maxDistance,a=e.radius,r=n.radius*n.grid.edge;if(a>i)return;const o=a*r/i,s=e.angle;t.fillStyle=e.color,t.beginPath(),t.arc(n.x+o*Math.sin(s),n.y-o*Math.cos(s),e.size,0,2*Math.PI),t.fill()}({ctx:t,target:this,indicator:e})}),this.attenuate=(({dt:t,indicator:e})=>{this.lifetime-=t/e.scanLine.period/_;const n=this.color.slice(0,17);this.color=n+this.lifetime+")"})}function D(t){!function(){const t=document.documentElement,e=C(".modal"),n=C(".modal-button"),i=C(".modal-background, .modal-close, .modal .button");n.length>0&&n.forEach(e=>{e.addEventListener("click",()=>{const n=e.dataset.target;!function(t,e){const n=document.getElementById(t);e.classList.add("is-clipped"),n.classList.add("is-active");const i=document.forms[0][0];i&&i.focus()}(n,t)})});i.length>0&&i.forEach(n=>{n.addEventListener("click",n=>{n.preventDefault(),N(t,e)})});document.addEventListener("keydown",n=>{const i=n||window.event;27===i.keyCode&&N(t,e)})}(),document.add[0].addEventListener("change",function(){const t=this.value.toLowerCase(),e=C(".target-option"),n=document.getElementById("add");"---"===t?(e.forEach(t=>{t.style.display="none"}),n.setAttribute("disabled","disabled")):(e.forEach(t=>{t.style.display="block"}),n.removeAttribute("disabled"),"linear"!==t&&C(".linear").forEach(t=>{t.style.display="none"}))}),function(t){document.getElementById("add_from_file").addEventListener("click",()=>{!function(){const t=document.getElementById("file").files[0],e=new FileReader;e.addEventListener("load",()=>{localStorage.targets=e.result}),e.readAsText(t)}(),JSON.parse(localStorage.targets).forEach(e=>{t.push(new j(e))})}),document.getElementById("add").addEventListener("click",()=>{const e=function(){const t=document.add;return{type:t.type.value.toLowerCase(),radius:parseInt(t.radius.value),angle:parseInt(t.angle.value)*Math.PI/180,xSpeed:parseInt(t.xSpeed.value),ySpeed:parseInt(t.ySpeed.value),xAcceleration:parseInt(t.xAcceleration.value),yAcceleration:parseInt(t.yAcceleration.value)}}();t.push(new j(e));const n=JSON.parse(localStorage.targets);n.push(e),localStorage.targets=JSON.stringify(n)}),document.getElementById("delete").addEventListener("click",()=>{!function(t){t.length=0,localStorage.targets=JSON.stringify([])}(t)}),document.getElementById("save").addEventListener("click",function(){document.getElementById("save").setAttribute("download","target_"+function(){const t=new Date,e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),a=t.getHours(),r=t.getMinutes(),o=t.getSeconds();return e+"-"+(n<=9?"0"+n:n)+"-"+(i<=9?"0"+i:i)+"_"+(a<=9?"0"+a:a)+"-"+(r<=9?"0"+r:r)+"_"+(o<=9?"0"+o:o)}()),this.href=function(){const t=localStorage.targets,e=new Blob([t],{type:"text/plain"});return URL.createObjectURL(e)}()})}(t)}function C(t){return Array.prototype.slice.call(document.querySelectorAll(t),0)}function N(t,e){t.classList.remove("is-clipped"),e.forEach(t=>{t.classList.remove("is-active")})}const q='[{"radius":10000,"angle":1.5707963267948966,"xSpeed":-1000,"xAcceleration":100,"type":"linear"},{"radius":24500,"angle":1.0471975511965976,"type":"random"}]';function J({dt:t,indicator:e,targets:n,detectedTargets:i}){const a=e.signal,r=e.filter,o=e.scanLine.angle;!function({dt:t,indicator:e}){const n=e.scanLine,i=2*Math.PI*t/n.period;n.angle=(n.angle+i)%(2*Math.PI)}({dt:t,indicator:e});const s=e.scanLine.angle;if(o===s)return;const c=[],l=[];!function({signal:t,startAngle:e,stopAngle:n,responses:i,targets:a}){const r=a.filter(t=>(function({minAngle:t,maxAngle:e,angle:n}){return t<e?n>=t&&n<e:n>=t&&n<2*Math.PI||n>=0&&n<e})({minAngle:e,maxAngle:n,angle:t.angle}));if(0===r.length)return;r.forEach(e=>{const n=Math.pow(10,-.1*t.attenuationRatio*e.radius),a=t.samples.slice();a.forEach((t,e,i)=>{i[e]=n*t});const r=2*e.radius/t.speed,o=Math.floor(r/t.td);let s=new Array(o).fill(0);(s=s.concat(a)).forEach((e,n,i)=>{i[n]+=(1-.5*Math.random())*t.noiseLevel}),i.push(s)})}({signal:a,startAngle:o,stopAngle:s,responses:c,targets:n}),function({signal:t,filter:e,responses:n,echoes:i}){if(0===n.length)return;const a=t.samples.length;n.forEach(n=>{const r=[];for(let t=0;t<n.length-a;t++){const i=n.slice(t,t+a),o=R({signal:i,filter:e.samples});r.push(W({response:o,signal:i,filterNorm:e.norm}))}const o=Math.max(...r);if(o>=t.responseLimit){const e=r.indexOf(o)+1,n=e*t.td;i.push(n)}})}({signal:a,filter:r,responses:c,echoes:l}),function({angle:t,echoes:e,detectedTargets:n}){e.forEach(e=>{n.push(new j({radius:e*S/2,angle:t})),n[n.length-1].lifetime=1})}({angle:s,echoes:l,detectedTargets:i})}function R({signal:t,filter:e}){const n=t.length,i=2*n-1,a=new Array(i).fill(0);for(let r=0;r<n;r++)a.forEach((a,o,s)=>{o-r>=0&&o-r<=i-n&&(s[o]+=t[r]*e[o-r])});return a}function W({response:t,signal:e,filterNorm:n}){const i=o(e)*n;return Math.max(...t)/i}!function(){const t=document.getElementById("canvas"),e=t.offsetWidth,n=t.offsetHeight,i=t.getContext("2d");let a=0;const o=new I({startX:e/2,startY:n/2,radius:e/2,color:"black"}),s=[],c=[];document.addEventListener("DOMContentLoaded",()=>{D(s)}),function({indicator:t,targets:e}){localStorage.targets=q,t.signal.sampling(),t.filter.create(),JSON.parse(localStorage.targets).forEach(t=>{e.push(new j(t))})}({indicator:o,targets:s}),r({ctx:i,indicator:o,targets:c});let l=Date.now();const d=()=>{const t=Date.now(),e=.001*(t-l);l=t,function({dt:t,time:e,indicator:n,targets:i,detectedTargets:a}){J({dt:t,indicator:n,targets:i,detectedTargets:a}),a.forEach((e,i,a)=>{e.attenuate({dt:t,indicator:n}),e.lifetime<=0&&delete a[i]}),i.forEach(t=>{const n=t.motionLaw(e);t.radius=n.radius,t.angle=n.angle})}({dt:e,time:a+=e,indicator:o,targets:s,detectedTargets:c}),r({ctx:i,indicator:o,targets:c}),requestAnimationFrame(d)};d()}()}]);